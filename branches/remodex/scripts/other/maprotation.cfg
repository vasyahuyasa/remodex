dm_maporder = "complex douze pgdm phosgene injustice duel7 duel8 deathtek"
dm_modelist = "0 2 3 4 5 6 7 8" // ffa insta eff, team
flag_maporder = "reissen tejen dust2 capture_night"
flag_modelist = "11 12 13 14 17 18"
capture_maporder = "nevil_c ph-capture reissen monastery"
capture_modelist = "9 10"
hold_modelist = "15 16 19"

nextmap = [	
	mode_ = (getmode)
	map_ = ""
	currmap = (getmap)
	maporder = ""
	
	if (isinlist $dm_modelist $mode_) [ maporder = $dm_maporder] 
	if (isinlist $flag_modelist $mode_) [ maporder = $flag_maporder] 
	if (isinlist $capture_modelist $mode_) [ maporder = $capture_maporder] 
	if (isinlist $hold_modelist $mode_) [ maporder = $capture_maporder] 
	
	// choose next map
	orderlen = (- (listlen $maporder) 1) // order len to index system
	mapindex = (indexof $maporder $currmap)
	if (&& (!= $mapindex -1) (< $mapindex $orderlen)) [ // map in list and not last
		map_ = (at $maporder (+ $mapindex 1))
	] [
		map_ = (at $maporder 0)
	]
	
	if (=s $map_ "") [ $map_ = $currmap ]
	
	echo (format "Nextmap: %1 mode: %2" $map_ $mode_)
]
